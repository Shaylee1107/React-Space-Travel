{"ast":null,"code":"import React,{useEffect,useState,useCallback,useMemo}from'react';import SpacecraftContext from'../context/SpacecraftContext';import SpaceTravelApi from'../services/SpaceTravelApi';import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const SpacecraftProvider=_ref=>{let{children}=_ref;const INITIAL_STATE=useMemo(()=>[],[]);const[spacecrafts,setSpacecrafts]=useState(INITIAL_STATE);const[currSpacecraft,setCurrSpacecraft]=useState('');const[destroyId,setDestroyId]=useState('');const buildSpacecraft=useCallback(formData=>{setSpacecrafts([formData]);},[]);useEffect(()=>{if(spacecrafts.length>0){const newestSpacecraft=spacecrafts[spacecrafts.length-1];newestSpacecraft.currentLocation=\"\";SpaceTravelApi.buildSpacecraft(newestSpacecraft);const sendNewSpacecraftToEarth=async()=>{const allAPISpacecraft=await SpaceTravelApi.getSpacecrafts();const newestFromAPI=allAPISpacecraft.data;const newCraftId=newestFromAPI[newestFromAPI.length-1].id;SpaceTravelApi.sendSpacecraftToPlanet({spacecraftId:newCraftId,targetPlanetId:2});setSpacecrafts(INITIAL_STATE);};sendNewSpacecraftToEarth();}},[buildSpacecraft,spacecrafts,INITIAL_STATE]);const destroySpacecraft=useCallback(id=>{setDestroyId(id);},[]);useEffect(()=>{const makeAPIDestroySpacecraft=async()=>{await SpaceTravelApi.destroySpacecraftById({id:destroyId});};makeAPIDestroySpacecraft();},[destroySpacecraft,destroyId]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(SpacecraftContext.Provider,{value:{spacecrafts,setSpacecrafts,buildSpacecraft,currSpacecraft,setCurrSpacecraft,destroySpacecraft},children:children})});};export default SpacecraftProvider;","map":{"version":3,"names":["React","useEffect","useState","useCallback","useMemo","SpacecraftContext","SpaceTravelApi","jsx","_jsx","Fragment","_Fragment","SpacecraftProvider","_ref","children","INITIAL_STATE","spacecrafts","setSpacecrafts","currSpacecraft","setCurrSpacecraft","destroyId","setDestroyId","buildSpacecraft","formData","length","newestSpacecraft","currentLocation","sendNewSpacecraftToEarth","allAPISpacecraft","getSpacecrafts","newestFromAPI","data","newCraftId","id","sendSpacecraftToPlanet","spacecraftId","targetPlanetId","destroySpacecraft","makeAPIDestroySpacecraft","destroySpacecraftById","Provider","value"],"sources":["/Users/owner/Documents/SPRINGBOARD/Projects/space-travel/src/providers/SpacecraftProvider.js"],"sourcesContent":["import React, {useEffect, useState, useCallback, useMemo} from 'react';\nimport SpacecraftContext from '../context/SpacecraftContext';\nimport SpaceTravelApi from '../services/SpaceTravelApi';\n\nconst SpacecraftProvider = ({ children }) => {\n    const INITIAL_STATE = useMemo(() => [], []);\n    const [spacecrafts, setSpacecrafts] = useState(INITIAL_STATE);\n    const [currSpacecraft, setCurrSpacecraft] = useState('');\n    const [destroyId, setDestroyId] = useState('');\n\n  const buildSpacecraft = useCallback((formData) => {\n    setSpacecrafts([formData]);\n  }, [])\n\n  useEffect(() => {\n    if(spacecrafts.length > 0){\n        const newestSpacecraft = spacecrafts[spacecrafts.length - 1]; \n        newestSpacecraft.currentLocation = \"\";\n        SpaceTravelApi.buildSpacecraft(newestSpacecraft);\n\n        const sendNewSpacecraftToEarth =  async() => {\n            const allAPISpacecraft = await SpaceTravelApi.getSpacecrafts();\n            const newestFromAPI = allAPISpacecraft.data;\n            const newCraftId = newestFromAPI[newestFromAPI.length - 1].id;\n            SpaceTravelApi.sendSpacecraftToPlanet({spacecraftId: newCraftId, targetPlanetId: 2})\n            setSpacecrafts(INITIAL_STATE);\n        }\n        sendNewSpacecraftToEarth();\n        \n    }\n\n  }, [buildSpacecraft, spacecrafts, INITIAL_STATE])\n\n  const destroySpacecraft = useCallback((id) => {\n    setDestroyId(id);\n  }, [])\n\n  useEffect(() => {\n    const makeAPIDestroySpacecraft = async () => {\n        await SpaceTravelApi.destroySpacecraftById({id: destroyId});\n    }\n\n    makeAPIDestroySpacecraft();\n  }, [destroySpacecraft, destroyId])\n\n    return (\n        <>\n            <SpacecraftContext.Provider value={{spacecrafts, setSpacecrafts, buildSpacecraft, currSpacecraft, setCurrSpacecraft, destroySpacecraft}}>\n                {children}\n            </SpacecraftContext.Provider>\n        </>\n    )\n}\n\nexport default SpacecraftProvider;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,CAAEC,QAAQ,CAAEC,WAAW,CAAEC,OAAO,KAAO,OAAO,CACtE,MAAO,CAAAC,iBAAiB,KAAM,8BAA8B,CAC5D,MAAO,CAAAC,cAAc,KAAM,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAExD,KAAM,CAAAC,kBAAkB,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACpC,KAAM,CAAAE,aAAa,CAAGV,OAAO,CAAC,IAAM,EAAE,CAAE,EAAE,CAAC,CAC3C,KAAM,CAACW,WAAW,CAAEC,cAAc,CAAC,CAAGd,QAAQ,CAACY,aAAa,CAAC,CAC7D,KAAM,CAACG,cAAc,CAAEC,iBAAiB,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACiB,SAAS,CAAEC,YAAY,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAEhD,KAAM,CAAAmB,eAAe,CAAGlB,WAAW,CAAEmB,QAAQ,EAAK,CAChDN,cAAc,CAAC,CAACM,QAAQ,CAAC,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CAENrB,SAAS,CAAC,IAAM,CACd,GAAGc,WAAW,CAACQ,MAAM,CAAG,CAAC,CAAC,CACtB,KAAM,CAAAC,gBAAgB,CAAGT,WAAW,CAACA,WAAW,CAACQ,MAAM,CAAG,CAAC,CAAC,CAC5DC,gBAAgB,CAACC,eAAe,CAAG,EAAE,CACrCnB,cAAc,CAACe,eAAe,CAACG,gBAAgB,CAAC,CAEhD,KAAM,CAAAE,wBAAwB,CAAI,KAAAA,CAAA,GAAW,CACzC,KAAM,CAAAC,gBAAgB,CAAG,KAAM,CAAArB,cAAc,CAACsB,cAAc,CAAC,CAAC,CAC9D,KAAM,CAAAC,aAAa,CAAGF,gBAAgB,CAACG,IAAI,CAC3C,KAAM,CAAAC,UAAU,CAAGF,aAAa,CAACA,aAAa,CAACN,MAAM,CAAG,CAAC,CAAC,CAACS,EAAE,CAC7D1B,cAAc,CAAC2B,sBAAsB,CAAC,CAACC,YAAY,CAAEH,UAAU,CAAEI,cAAc,CAAE,CAAC,CAAC,CAAC,CACpFnB,cAAc,CAACF,aAAa,CAAC,CACjC,CAAC,CACDY,wBAAwB,CAAC,CAAC,CAE9B,CAEF,CAAC,CAAE,CAACL,eAAe,CAAEN,WAAW,CAAED,aAAa,CAAC,CAAC,CAEjD,KAAM,CAAAsB,iBAAiB,CAAGjC,WAAW,CAAE6B,EAAE,EAAK,CAC5CZ,YAAY,CAACY,EAAE,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN/B,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoC,wBAAwB,CAAG,KAAAA,CAAA,GAAY,CACzC,KAAM,CAAA/B,cAAc,CAACgC,qBAAqB,CAAC,CAACN,EAAE,CAAEb,SAAS,CAAC,CAAC,CAC/D,CAAC,CAEDkB,wBAAwB,CAAC,CAAC,CAC5B,CAAC,CAAE,CAACD,iBAAiB,CAAEjB,SAAS,CAAC,CAAC,CAEhC,mBACIX,IAAA,CAAAE,SAAA,EAAAG,QAAA,cACIL,IAAA,CAACH,iBAAiB,CAACkC,QAAQ,EAACC,KAAK,CAAE,CAACzB,WAAW,CAAEC,cAAc,CAAEK,eAAe,CAAEJ,cAAc,CAAEC,iBAAiB,CAAEkB,iBAAiB,CAAE,CAAAvB,QAAA,CACnIA,QAAQ,CACe,CAAC,CAC/B,CAAC,CAEX,CAAC,CAED,cAAe,CAAAF,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}